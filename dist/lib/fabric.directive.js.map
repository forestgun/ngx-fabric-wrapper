{"version":3,"file":"fabric.directive.js","sourceRoot":"","sources":["../../src/lib/fabric.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { fabric } from 'fabric';\n\nimport ResizeObserver from 'resize-observer-polyfill';\n\nimport { Directive, Optional, Inject,\n  OnInit, OnDestroy, DoCheck, OnChanges,\n  Input, Output, EventEmitter, NgZone, ElementRef,\n  KeyValueDiffer, KeyValueDiffers, SimpleChanges } from '@angular/core';\n\nimport { FABRIC_CONFIG, FabricConfig, FabricConfigInterface,\n  FabricEvent, FabricEvents } from './fabric.interfaces';\n\n@Directive({\n  selector: '[fabric]',\n  exportAs: 'ngxFabric'\n})\nexport class FabricDirective implements OnInit, OnDestroy, DoCheck, OnChanges {\n  private instance: fabric.Canvas | fabric.StaticCanvas | null = null;\n\n  private ro: ResizeObserver | null = null;\n\n  private objectsJSON: object | null = null;\n\n  private initialZoom: number | null = null;\n  private initialWidth: number | null = null;\n  private initialHeight: number | null = null;\n\n  private configDiff: KeyValueDiffer<string, any> | null = null;\n\n  @Input()\n  set zoom(zoom: number) {\n    this.setZoom(zoom);\n  }\n\n  @Input()\n  set width(width: number) {\n    this.setWidth(width);\n  }\n  @Input()\n  set height(height: number) {\n    this.setHeight(height);\n  }\n\n  @Input() disabled: boolean = false;\n\n  @Input('fabric') config?: FabricConfigInterface;\n\n  @Output() drop = new EventEmitter<any>();\n    @Output() dragover = new EventEmitter<any>();\n    @Output() dragenter = new EventEmitter<any>();\n    @Output() dragleave = new EventEmitter<any>();\n\n    @Output() mouseup = new EventEmitter<any>();\n    @Output() mousedown = new EventEmitter<any>();\n    @Output() mouseover = new EventEmitter<any>();\n    @Output() mouseout = new EventEmitter<any>();\n    @Output() mousemove = new EventEmitter<any>();\n    @Output() mousewheel = new EventEmitter<any>();\n    @Output() mousedblclick = new EventEmitter<any>();\n    @Output() mouseupBefore = new EventEmitter<any>();\n    @Output() mousedownBefore = new EventEmitter<any>();\n    @Output() mousemoveBefore = new EventEmitter<any>();\n\n    @Output() mouseUp = new EventEmitter<any>();\n    @Output() mouseDown = new EventEmitter<any>();\n    @Output() mouseOver = new EventEmitter<any>();\n    @Output() mouseOut = new EventEmitter<any>();\n    @Output() mouseMove = new EventEmitter<any>();\n    @Output() mouseDblclick = new EventEmitter<any>();\n    @Output() mouseUpBefore = new EventEmitter<any>();\n    @Output() mouseDownBefore = new EventEmitter<any>();\n    @Output() mouseMoveBefore = new EventEmitter<any>();\n\n    @Output() pathCreated = new EventEmitter<any>();\n    @Output() alterRender = new EventEmitter<any>();\n\n    @Output() objectAdded = new EventEmitter<any>();\n    @Output() objectMoved = new EventEmitter<any>();\n    @Output() objectScaled = new EventEmitter<any>();\n    @Output() objectSkewed = new EventEmitter<any>();\n    @Output() objectRotated = new EventEmitter<any>();\n    @Output() objectRemoved = new EventEmitter<any>();\n    @Output() objectModified = new EventEmitter<any>();\n    @Output() objectSelected = new EventEmitter<any>();\n    @Output() objectMoving = new EventEmitter<any>();\n    @Output() objectScaling = new EventEmitter<any>();\n    @Output() objectSkewing = new EventEmitter<any>();\n    @Output() objectRotating = new EventEmitter<any>();\n\n    @Output() selectionCleared = new EventEmitter<any>();\n    @Output() selectionCreated = new EventEmitter<any>();\n    @Output() selectionUpdated = new EventEmitter<any>();\n\n    @Output() beforeTransform = new EventEmitter<any>();\n    @Output() beforeSelectionCleared = new EventEmitter<any>();\n\n  constructor(private zone: NgZone,\n    private elementRef: ElementRef, private differs: KeyValueDiffers,\n    @Optional() @Inject(FABRIC_CONFIG) private defaults: FabricConfigInterface) {}\n\n  ngOnInit(): void {\n    const params = new FabricConfig(this.defaults);\n\n    params.assign(this.config); // Custom configuration\n\n    this.zone.runOutsideAngular(() => {\n      if (!this.disabled) {\n        this.instance = new fabric.Canvas(this.elementRef.nativeElement, params);\n      } else {\n        this.instance = new fabric.StaticCanvas(this.elementRef.nativeElement, params);\n      }\n\n      if (this.initialZoom) {\n        this.setZoom(this.initialZoom);\n      }\n\n      if (this.initialWidth) {\n        this.setWidth(this.initialWidth);\n      }\n\n      if (this.initialHeight) {\n        this.setHeight(this.initialHeight);\n      }\n\n      if (this.objectsJSON !== null) {\n        this.loadFromJSON(this.objectsJSON);\n      }\n    });\n\n    // Add native Fabric event handling\n    FabricEvents.forEach((eventName: FabricEvent) => {\n      const fabricEvent = eventName.replace(/([A-Z])/g, (c) => `:${c.toLowerCase()}`);\n\n      if (this.instance) {\n        this.instance.on(fabricEvent, (event: any) => {\n          this.zone.run(() => {\n            if (this[eventName].observers.length) {\n              this[eventName].emit(event);\n            }\n          });\n        });\n      }\n    });\n\n    if (!this.configDiff) {\n      this.configDiff = this.differs.find(this.config || {}).create();\n\n      this.configDiff.diff(this.config || {});\n    }\n\n    this.zone.runOutsideAngular(() => {\n      this.ro = new ResizeObserver((entries, observer) => {\n        const element = this.elementRef.nativeElement.parentElement.parentElement;\n\n        if (!this.initialWidth) {\n          this.setWidth(element.offsetWidth);\n        }\n\n        if (!this.initialHeight) {\n          this.setHeight(element.offsetHeight);\n        }\n      });\n\n      this.ro.observe(this.elementRef.nativeElement.parentElement.parentElement);\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.ro) {\n      this.ro.disconnect();\n    }\n\n    if (this.instance) {\n      this.objectsJSON = this.instance.toObject();\n\n      this.instance.dispose();\n\n      delete this.instance;\n\n      this.instance = null;\n    }\n  }\n\n  ngDoCheck(): void {\n    if (this.configDiff) {\n      const changes = this.configDiff.diff(this.config || {});\n\n      if (changes) {\n        this.ngOnDestroy();\n\n        this.ngOnInit();\n      }\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.instance && changes['disabled']) {\n      if (changes['disabled'].currentValue !== changes['disabled'].previousValue) {\n        this.ngOnDestroy();\n\n        this.ngOnInit();\n      }\n    }\n  }\n\n  public fabric(): any {\n    return this.instance;\n  }\n\n  public clear(): void {\n    if (this.instance) {\n      this.instance.clear();\n    }\n  }\n\n  public render(): void {\n    if (this.instance) {\n      this.instance.renderAll();\n    }\n  }\n\n  public setZoom(zoom: number): void {\n    this.initialZoom = zoom;\n\n    if (this.instance) {\n      this.instance.setZoom(zoom);\n    }\n  }\n\n  public setWidth(width: number): void {\n    this.initialWidth = width;\n\n    if (this.instance) {\n      this.instance.setWidth(width);\n    }\n  }\n\n  public setHeight(height: number): void {\n    this.initialHeight = height;\n\n    if (this.instance) {\n      this.instance.setHeight(height);\n    }\n  }\n\n  public loadFromJSON(json: any, callback?: Function, reviverOpt?: any): void {\n    if (this.instance) {\n      this.instance.loadFromJSON(json, () => {\n        let renderAll = true;\n\n        if (callback) {\n          renderAll = callback();\n        }\n\n        if (renderAll && this.instance) {\n          this.instance.renderAll();\n        }\n      }, reviverOpt);\n    }\n  }\n}\n"]}